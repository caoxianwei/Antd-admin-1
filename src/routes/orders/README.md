# 高水订单功能复写思考

相关代码组织说明
```
│  
├─component
│  |--toolbar.js        * 可复用的组件
│
├─pages
│  ├─buyOrder           * 采购订单
│  │  │--buyOrder.js    
│  │  │
│  │  └─buyComp
│  │       |--filter.js 
│  │       |--list.js
│  │
│  ├─originOrder        * 原始订单
│  │  │--originOrder.js
│  │  │
│  │  └─originComp
│  │        |--filter.js
│  │        |--footer.js
│  │        |--list.js
│  │
│  └─sellOrder          * 销售订单
│      │--sellOrder.js
│      │
│      └─sellComp
│           |--filter.js
│
└─utils                 * 公用函数
|   |---index.js        * 公共api
|   |---mock.js         * 模拟的不同toolbar数据
|   |---request.js      * 请求
|
|--HocTable.js          * 高阶组件用于包裹原始订单和销售订单
│--README.md            
```

## 思路：
`高阶组件 = 逻辑  + UI组件。`

即输入一个UI组件 高阶组件融合其他组件（容器组件作用）+ 组件们公用的逻辑返回输入组件一个新的`功能完善`+`界面完善`的组件。

HocTable作为高阶组件，负责：
+ 1.原始订单和销售订单的数据来源，从远程获取到数据之后将此数据设为自身的state并作为props传给被包裹的组件。即实现`属性代理`
+ 2.两个订单公共逻辑的实现：如toolbar的上张下张切换功能

思考难点：
+ 1.逻辑相同的部分如上张下张，相同点都是发送请求，接收后台返回的数据，并将此数据传递给UI组件，不同的是请求的url不一样。

**所以==>** 不同于以往以各订单为最小单位设api请求集，这次以"方法"为最小单位设api请求集。不同订单调用同一方法时均使用的同一个逻辑函数，只是根据请求匹配不同的url。

+ 2.当多个UI组件（如原始订单、销售订单）均使用HocTable高阶组件生成一个"健全"的订单时，高阶组件怎么判断此时调用了"上张"功能的是哪个组件？

**==>** 高阶组件判断被包裹的组件的名字。





